togglemainmenu = [|| hidetopui [toggleui main]]
bind ESCAPE [togglemainmenu]

showmainplayerprev = 1
setpersist showmainplayerprev 1
setcomplete showmainplayerprev 1

uimenu "main" (format "%1 v%2" $versionname $versionstring) [
    uihlist $ui_padbutton [
        if $showmainplayerprev [
            uivlist $ui_padbutton [ uiplayerpreview (getplayermodel) (getplayercolour -1) (getplayerteam 1) (weapselect) (getplayervanity) 1 1 0.4 0.5 ]
        ]
        uivlist $ui_padbutton [
            uialign 0 -1
            uispace 0 0.01
            uiimage "textures/logo" $ui_default 0 0.48 0.12
            uispace 0 0.01
            uibuttonf "Profile Setup" "textures/privs/none" 0.3 0.04 [ showui "profile" ]
            uibuttonf "Play Offline" "textures/player" 0.3 0.04 [ hideui "main"; localconnect ]
            uibuttonf "Connect" "textures/team" 0.3 0.04 [ hideui "main"; connect ]
            uibuttonf "Disconnect" "textures/hud/alert" 0.3 0.04 [ disconnect ] 0 [] (! (isconnected))
            uibuttonf "Credits" "textures/question" 0.3 0.04 [ showui "credits" ]
            uibuttonf "Quit" "textures/warning" 0.3 0.04 [ quit ]
        ]
    ]
]
